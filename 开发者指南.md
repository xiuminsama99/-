# éšæœºæŒ‡çº¹æµè§ˆå™¨ - å¼€å‘è€…æŒ‡å—

## ğŸ¯ å¼€å‘ç¯å¢ƒæ­å»º

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **Node.js**: 16.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 7.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Git**: 2.20.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**: è‡³å°‘ 4GB RAM
- **å­˜å‚¨**: è‡³å°‘ 2GB å¯ç”¨ç©ºé—´

### å¼€å‘å·¥å…·æ¨è
- **IDE**: Visual Studio Code
- **è°ƒè¯•å™¨**: Chrome DevTools / Electron DevTools
- **ç‰ˆæœ¬æ§åˆ¶**: Git
- **åŒ…ç®¡ç†**: npm (æ¨è) æˆ– yarn

### ç¯å¢ƒé…ç½®

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd éšæœºæŒ‡çº¹æµè§ˆå™¨
```

#### 2. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿ
npm config set registry https://registry.npmmirror.com
npm install
```

#### 3. å¼€å‘ç¯å¢ƒéªŒè¯
```bash
# è¿è¡ŒåŸºç¡€æµ‹è¯•
npm test

# å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„è¯¦è§£

```
éšæœºæŒ‡çº¹æµè§ˆå™¨/
â”œâ”€â”€ src/                          # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.js                   # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”œâ”€â”€ fingerprint-generator.js  # æŒ‡çº¹ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ fingerprint-injector.js   # æŒ‡çº¹æ³¨å…¥å™¨
â”‚   â”œâ”€â”€ data-cleaner.js          # æ•°æ®æ¸…ç†å™¨
â”‚   â””â”€â”€ config.js                # é…ç½®ç®¡ç†å™¨
â”œâ”€â”€ test/                         # æµ‹è¯•æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ basic-test.js            # åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ fingerprint-test.js      # æŒ‡çº¹åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ performance-test.js      # æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ assets/                       # èµ„æºæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ icon.png                 # åº”ç”¨å›¾æ ‡
â”‚   â””â”€â”€ ...                      # å…¶ä»–èµ„æº
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ æŠ€æœ¯æ–‡æ¡£.md               # æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ ä½¿ç”¨æŒ‡å—.md               # ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ å¼€å‘è€…æŒ‡å—.md             # æœ¬æ–‡æ¡£
â”œâ”€â”€ scripts/                      # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ build.sh                 # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ deploy.sh                # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ .github/                      # GitHubé…ç½®
â”‚   â””â”€â”€ workflows/               # CI/CDå·¥ä½œæµ
â”œâ”€â”€ package.json                  # é¡¹ç›®é…ç½®
â”œâ”€â”€ .npmrc                       # npmé…ç½®
â”œâ”€â”€ .gitignore                   # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ å¼€å‘å·¥ä½œæµ

### 1. åŠŸèƒ½å¼€å‘æµç¨‹

#### åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
```bash
git checkout -b feature/new-fingerprint-type
```

#### å¼€å‘æ–°åŠŸèƒ½
1. **åˆ†æéœ€æ±‚**: æ˜ç¡®åŠŸèƒ½éœ€æ±‚å’ŒæŠ€æœ¯æ–¹æ¡ˆ
2. **è®¾è®¡æ¥å£**: å®šä¹‰æ¨¡å—æ¥å£å’Œæ•°æ®ç»“æ„
3. **ç¼–å†™ä»£ç **: å®ç°æ ¸å¿ƒåŠŸèƒ½é€»è¾‘
4. **ç¼–å†™æµ‹è¯•**: ç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§
5. **æ–‡æ¡£æ›´æ–°**: æ›´æ–°ç›¸å…³æŠ€æœ¯æ–‡æ¡£

#### ä»£ç æäº¤
```bash
git add .
git commit -m "feat: æ·»åŠ æ–°çš„æŒ‡çº¹ç±»å‹æ”¯æŒ"
git push origin feature/new-fingerprint-type
```

### 2. æµ‹è¯•é©±åŠ¨å¼€å‘ (TDD)

#### ç¼–å†™æµ‹è¯•ç”¨ä¾‹
```javascript
// test/new-feature-test.js
describe('æ–°åŠŸèƒ½æµ‹è¯•', () => {
    test('åº”è¯¥æ­£ç¡®å¤„ç†æ–°çš„æŒ‡çº¹ç±»å‹', () => {
        const generator = new FingerprintGenerator();
        const fingerprint = generator.generateNewType();
        
        expect(fingerprint).toHaveProperty('newProperty');
        expect(fingerprint.newProperty).toBeDefined();
    });
});
```

#### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- test/new-feature-test.js

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
npm test -- --watch
```

### 3. ä»£ç å®¡æŸ¥æµç¨‹

#### åˆ›å»ºPull Request
1. æ¨é€åŠŸèƒ½åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“
2. åœ¨GitHubä¸Šåˆ›å»ºPull Request
3. å¡«å†™è¯¦ç»†çš„PRæè¿°
4. è¯·æ±‚ä»£ç å®¡æŸ¥

#### ä»£ç å®¡æŸ¥è¦ç‚¹
- **åŠŸèƒ½æ­£ç¡®æ€§**: åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ
- **ä»£ç è´¨é‡**: ä»£ç æ˜¯å¦æ¸…æ™°ã€å¯ç»´æŠ¤
- **æ€§èƒ½å½±å“**: æ˜¯å¦å½±å“åº”ç”¨æ€§èƒ½
- **å®‰å…¨æ€§**: æ˜¯å¦å¼•å…¥å®‰å…¨é£é™©
- **æµ‹è¯•è¦†ç›–**: æ˜¯å¦æœ‰å……åˆ†çš„æµ‹è¯•

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### æµ‹è¯•é‡‘å­—å¡”

```
    /\
   /  \     E2Eæµ‹è¯• (å°‘é‡)
  /____\    - å®Œæ•´æµç¨‹æµ‹è¯•
 /      \   - ç”¨æˆ·åœºæ™¯æµ‹è¯•
/________\  
           é›†æˆæµ‹è¯• (é€‚é‡)
          - æ¨¡å—é—´äº¤äº’æµ‹è¯•
         - APIé›†æˆæµ‹è¯•
        
        å•å…ƒæµ‹è¯• (å¤§é‡)
       - å‡½æ•°çº§åˆ«æµ‹è¯•
      - æ¨¡å—çº§åˆ«æµ‹è¯•
```

### å•å…ƒæµ‹è¯•ç¤ºä¾‹

#### æŒ‡çº¹ç”Ÿæˆå™¨æµ‹è¯•
```javascript
// test/fingerprint-generator.test.js
const FingerprintGenerator = require('../src/fingerprint-generator');

describe('FingerprintGenerator', () => {
    let generator;
    
    beforeEach(() => {
        generator = new FingerprintGenerator();
    });
    
    describe('generate()', () => {
        test('åº”è¯¥ç”ŸæˆåŒ…å«æ‰€æœ‰å¿…éœ€å±æ€§çš„æŒ‡çº¹', () => {
            const fingerprint = generator.generate();
            
            const requiredProps = [
                'userAgent', 'platform', 'language',
                'screenWidth', 'screenHeight', 'colorDepth'
            ];
            
            requiredProps.forEach(prop => {
                expect(fingerprint).toHaveProperty(prop);
                expect(fingerprint[prop]).toBeDefined();
            });
        });
        
        test('åº”è¯¥ç”Ÿæˆå”¯ä¸€çš„æ—¶é—´æˆ³', () => {
            const fp1 = generator.generate();
            const fp2 = generator.generate();
            
            expect(fp1.timestamp).not.toBe(fp2.timestamp);
        });
        
        test('åº”è¯¥ç”Ÿæˆåˆç†çš„å±å¹•åˆ†è¾¨ç‡', () => {
            const fingerprint = generator.generate();
            
            expect(fingerprint.screenWidth).toBeGreaterThan(800);
            expect(fingerprint.screenHeight).toBeGreaterThan(600);
            expect(fingerprint.screenWidth).toBeLessThan(5000);
            expect(fingerprint.screenHeight).toBeLessThan(5000);
        });
    });
    
    describe('getRandomElement()', () => {
        test('åº”è¯¥ä»æ•°ç»„ä¸­è¿”å›æœ‰æ•ˆå…ƒç´ ', () => {
            const array = ['a', 'b', 'c'];
            const result = generator.getRandomElement(array);
            
            expect(array).toContain(result);
        });
        
        test('åº”è¯¥å¤„ç†ç©ºæ•°ç»„', () => {
            const result = generator.getRandomElement([]);
            expect(result).toBeUndefined();
        });
    });
});
```

### é›†æˆæµ‹è¯•ç¤ºä¾‹

#### æµè§ˆå™¨å¯åŠ¨æµç¨‹æµ‹è¯•
```javascript
// test/integration.test.js
const RandomFingerprintBrowser = require('../src/main');

describe('æµè§ˆå™¨é›†æˆæµ‹è¯•', () => {
    let browser;
    
    beforeEach(() => {
        browser = new RandomFingerprintBrowser();
    });
    
    afterEach(async () => {
        if (browser) {
            await browser.cleanup();
        }
    });
    
    test('åº”è¯¥æˆåŠŸå®Œæˆåˆå§‹åŒ–æµç¨‹', async () => {
        await expect(browser.initialize()).resolves.not.toThrow();
    });
    
    test('åº”è¯¥æ­£ç¡®åº”ç”¨æŒ‡çº¹è®¾ç½®', async () => {
        await browser.initialize();
        
        const fingerprint = browser.currentFingerprint;
        expect(fingerprint).toBeDefined();
        expect(fingerprint.userAgent).toBeDefined();
    });
    
    test('åº”è¯¥åœ¨å…³é—­æ—¶æ¸…ç†æ•°æ®', async () => {
        await browser.initialize();
        await browser.close();
        
        const stats = await browser.dataCleaner.getDataUsageStats();
        expect(stats.totalSize).toBeLessThan(1024 * 1024); // < 1MB
    });
});
```

### æ€§èƒ½æµ‹è¯•

#### å¯åŠ¨æ—¶é—´æµ‹è¯•
```javascript
// test/performance.test.js
describe('æ€§èƒ½æµ‹è¯•', () => {
    test('æµè§ˆå™¨å¯åŠ¨æ—¶é—´åº”è¯¥åœ¨åˆç†èŒƒå›´å†…', async () => {
        const startTime = Date.now();
        
        const browser = new RandomFingerprintBrowser();
        await browser.initialize();
        
        const endTime = Date.now();
        const startupTime = endTime - startTime;
        
        expect(startupTime).toBeLessThan(10000); // 10ç§’å†…å¯åŠ¨
        
        await browser.close();
    });
    
    test('æŒ‡çº¹ç”Ÿæˆæ€§èƒ½æµ‹è¯•', () => {
        const generator = new FingerprintGenerator();
        const iterations = 1000;
        
        const startTime = Date.now();
        
        for (let i = 0; i < iterations; i++) {
            generator.generate();
        }
        
        const endTime = Date.now();
        const avgTime = (endTime - startTime) / iterations;
        
        expect(avgTime).toBeLessThan(10); // å¹³å‡æ¯æ¬¡ç”Ÿæˆå°äº10ms
    });
});
```

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. Electronè°ƒè¯•

#### ä¸»è¿›ç¨‹è°ƒè¯•
```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
npm run dev -- --inspect=9229

# ä½¿ç”¨Chrome DevTools
# æ‰“å¼€ chrome://inspect è¿æ¥åˆ°è°ƒè¯•å™¨
```

#### æ¸²æŸ“è¿›ç¨‹è°ƒè¯•
```javascript
// åœ¨main.jsä¸­å¯ç”¨DevTools
this.mainWindow = new BrowserWindow({
    webPreferences: {
        // ... å…¶ä»–é…ç½®
    }
});

// å¼€å‘æ¨¡å¼ä¸‹è‡ªåŠ¨æ‰“å¼€DevTools
if (process.env.NODE_ENV === 'development') {
    this.mainWindow.webContents.openDevTools();
}
```

### 2. æ—¥å¿—è°ƒè¯•

#### ç»“æ„åŒ–æ—¥å¿—
```javascript
// src/utils/logger.js
class Logger {
    static debug(message, data = {}) {
        if (process.env.NODE_ENV === 'development') {
            console.log(`[DEBUG] ${message}`, data);
        }
    }
    
    static info(message, data = {}) {
        console.log(`[INFO] ${message}`, data);
    }
    
    static error(message, error = null) {
        console.error(`[ERROR] ${message}`, error);
    }
}

// ä½¿ç”¨ç¤ºä¾‹
Logger.debug('æŒ‡çº¹ç”Ÿæˆå¼€å§‹', { timestamp: Date.now() });
Logger.info('æµè§ˆå™¨å¯åŠ¨æˆåŠŸ');
Logger.error('æ•°æ®æ¸…ç†å¤±è´¥', error);
```

#### æ€§èƒ½æ—¥å¿—
```javascript
// æ€§èƒ½ç›‘æ§
function performanceLog(name, fn) {
    return async (...args) => {
        const startTime = Date.now();
        try {
            const result = await fn(...args);
            const endTime = Date.now();
            Logger.debug(`${name} æ‰§è¡Œæ—¶é—´`, { 
                duration: endTime - startTime 
            });
            return result;
        } catch (error) {
            const endTime = Date.now();
            Logger.error(`${name} æ‰§è¡Œå¤±è´¥`, { 
                duration: endTime - startTime,
                error: error.message 
            });
            throw error;
        }
    };
}

// ä½¿ç”¨ç¤ºä¾‹
const timedGenerate = performanceLog('æŒ‡çº¹ç”Ÿæˆ', 
    generator.generate.bind(generator)
);
```

### 3. å†…å­˜è°ƒè¯•

#### å†…å­˜æ³„æ¼æ£€æµ‹
```javascript
// å†…å­˜ç›‘æ§å·¥å…·
class MemoryMonitor {
    constructor() {
        this.baseline = null;
        this.samples = [];
    }
    
    setBaseline() {
        this.baseline = process.memoryUsage();
        Logger.debug('å†…å­˜åŸºçº¿è®¾ç½®', this.baseline);
    }
    
    sample(label) {
        const current = process.memoryUsage();
        const sample = {
            label,
            timestamp: Date.now(),
            memory: current,
            diff: this.baseline ? {
                rss: current.rss - this.baseline.rss,
                heapTotal: current.heapTotal - this.baseline.heapTotal,
                heapUsed: current.heapUsed - this.baseline.heapUsed
            } : null
        };
        
        this.samples.push(sample);
        Logger.debug('å†…å­˜é‡‡æ ·', sample);
        
        return sample;
    }
    
    report() {
        Logger.info('å†…å­˜ä½¿ç”¨æŠ¥å‘Š', {
            baseline: this.baseline,
            samples: this.samples,
            totalSamples: this.samples.length
        });
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const memMonitor = new MemoryMonitor();
memMonitor.setBaseline();

// åœ¨å…³é”®ç‚¹è¿›è¡Œé‡‡æ ·
memMonitor.sample('åº”ç”¨å¯åŠ¨å');
memMonitor.sample('æŒ‡çº¹ç”Ÿæˆå');
memMonitor.sample('æ•°æ®æ¸…ç†å');

memMonitor.report();
```

## ğŸš€ æ„å»ºå’Œéƒ¨ç½²

### å¼€å‘æ„å»º
```bash
# å¼€å‘æ¨¡å¼æ„å»º
npm run dev

# ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡å¯
npm run dev -- --watch
```

### ç”Ÿäº§æ„å»º
```bash
# æ¸…ç†æ—§æ„å»º
npm run clean

# ç”Ÿäº§æ„å»º
npm run build

# æ„å»ºæ‰€æœ‰å¹³å°
npm run build:all
```

### è‡ªå®šä¹‰æ„å»ºè„šæœ¬
```javascript
// scripts/build.js
const builder = require('electron-builder');
const path = require('path');

async function buildApp() {
    try {
        console.log('å¼€å§‹æ„å»ºåº”ç”¨...');
        
        const config = {
            appId: 'com.randomfingerprintbrowser.app',
            productName: 'éšæœºæŒ‡çº¹æµè§ˆå™¨',
            directories: {
                output: 'dist'
            },
            files: [
                'src/**/*',
                'node_modules/**/*',
                'package.json'
            ],
            // å¹³å°ç‰¹å®šé…ç½®
            win: {
                target: 'nsis',
                icon: 'assets/icon.ico'
            },
            mac: {
                target: 'dmg',
                icon: 'assets/icon.icns'
            },
            linux: {
                target: 'AppImage',
                icon: 'assets/icon.png'
            }
        };
        
        await builder.build({
            targets: builder.Platform.current().createTarget(),
            config
        });
        
        console.log('æ„å»ºå®Œæˆï¼');
    } catch (error) {
        console.error('æ„å»ºå¤±è´¥:', error);
        process.exit(1);
    }
}

buildApp();
```

## ğŸ“ ä»£ç è§„èŒƒ

### ESLinté…ç½®
```javascript
// .eslintrc.js
module.exports = {
    env: {
        node: true,
        es2021: true,
        jest: true
    },
    extends: [
        'eslint:recommended'
    ],
    parserOptions: {
        ecmaVersion: 12,
        sourceType: 'module'
    },
    rules: {
        'indent': ['error', 4],
        'linebreak-style': ['error', 'unix'],
        'quotes': ['error', 'single'],
        'semi': ['error', 'always'],
        'no-console': 'warn',
        'no-unused-vars': 'error',
        'prefer-const': 'error',
        'arrow-spacing': 'error'
    }
};
```

### Prettieré…ç½®
```json
{
    "semi": true,
    "trailingComma": "es5",
    "singleQuote": true,
    "printWidth": 80,
    "tabWidth": 4,
    "useTabs": false
}
```

### æäº¤ä¿¡æ¯è§„èŒƒ
```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ›´æ–°æ–‡æ¡£
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æ·»åŠ æµ‹è¯•
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

ç¤ºä¾‹:
feat: æ·»åŠ WebGLæŒ‡çº¹éšæœºåŒ–åŠŸèƒ½
fix: ä¿®å¤æ•°æ®æ¸…ç†ä¸å®Œå…¨çš„é—®é¢˜
docs: æ›´æ–°APIæ–‡æ¡£
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### è´¡çŒ®æµç¨‹
1. **Forké¡¹ç›®**: åœ¨GitHubä¸Šforké¡¹ç›®åˆ°ä¸ªäººè´¦æˆ·
2. **åˆ›å»ºåˆ†æ”¯**: åŸºäºmainåˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. **å¼€å‘åŠŸèƒ½**: æŒ‰ç…§å¼€å‘è§„èŒƒå®ç°åŠŸèƒ½
4. **ç¼–å†™æµ‹è¯•**: ç¡®ä¿ä»£ç è´¨é‡
5. **æäº¤ä»£ç **: ä½¿ç”¨è§„èŒƒçš„æäº¤ä¿¡æ¯
6. **åˆ›å»ºPR**: è¯¦ç»†æè¿°å˜æ›´å†…å®¹
7. **ä»£ç å®¡æŸ¥**: å“åº”å®¡æŸ¥æ„è§
8. **åˆå¹¶ä»£ç **: å®¡æŸ¥é€šè¿‡ååˆå¹¶

### è´¡çŒ®ç±»å‹
- **åŠŸèƒ½å¼€å‘**: æ–°å¢åŠŸèƒ½ç‰¹æ€§
- **Bugä¿®å¤**: ä¿®å¤å·²çŸ¥é—®é¢˜
- **æ€§èƒ½ä¼˜åŒ–**: æå‡åº”ç”¨æ€§èƒ½
- **æ–‡æ¡£æ”¹è¿›**: å®Œå–„é¡¹ç›®æ–‡æ¡£
- **æµ‹è¯•è¡¥å……**: å¢åŠ æµ‹è¯•è¦†ç›–
- **ä»£ç é‡æ„**: æ”¹è¿›ä»£ç ç»“æ„

### å¼€å‘è€…ç¤¾åŒº
- **GitHub Discussions**: æŠ€æœ¯è®¨è®ºå’Œé—®é¢˜äº¤æµ
- **Issues**: BugæŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚
- **Wiki**: é¡¹ç›®çŸ¥è¯†åº“
- **Release Notes**: ç‰ˆæœ¬æ›´æ–°è¯´æ˜

---

**å¼€å‘è€…æŒ‡å—ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2024å¹´6æœˆ11æ—¥  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
